<!DOCTYPE html>
<html lang="de">
  <head>
    <title>{{ property.title }} | {{ shop.name }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {% if shop.faviconUrl %}
    <link rel="icon" href="{{ shop.faviconUrl }}" type="image/x-icon" />
    {% else %}
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    {% endif %}
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.12/dist/css/lightgallery.min.css" />
    <link href="https://fonts.bunny.net/css?family=noto-sans-tc:400,700" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
      .hidden {
        display: none;
      }
      .show-contact-btn {
        background-color: #006cff;
        color: white;
        border: none;
        border-radius: 8px;
        height: 35px;
        width: 192px;
      }
      :root {
        --font-family: "Noto Sans TC", sans-serif;
        --font-color: #222222;
        --container-width: 1140px;
        --border-color: #e9e9e9;
        --border-radius: 2px;
        --gap: 10px;
        --image-gallery-height: 125%;
        --footer-bg: white;
      }
      .page-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      .container {
        max-width: var(--container-width);
      }
      .card {
        border-radius: var(--border-radius);
        border-bottom: 1px solid var(--border-color);
      }
      .modal-footer {
        background-color: #f3f3f3;
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
      }
      body {
        font-family: var(--font-family);
        color: var(--font-color);
      }
      article p {
        line-height: 1.7;
      }
      a {
        color: inherit;
      }
      a:hover,
      article a {
        color: var(--primary);
      }
      a:hover {
        text-decoration: underline;
      }
      .headline {
        font-size: 1.75rem;
        font-weight: 500;
        margin-bottom: 1.5rem;
      }
      .modal article {
        font-size: 0.9rem;
      }
      .btn {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
        border-radius: var(--border-radius);
      }
      .btn-primary {
        background-color: var(--primary);
        border-color: var(--primary);
      }
      .disabled {
        pointer-events: none;
      }
      .btn-primary.disabled {
        background-color: var(--primary-light);
        border-color: var(--primary-light);
      }
      .btn-primary:active:not(:disabled):not(.disabled),
      .btn-primary:focus:not(:disabled):not(.disabled),
      .btn-primary:hover {
        background-color: var(--primary-light);
        border-color: var(--primary);
        box-shadow: none !important;
      }
      .btn-sm {
        font-size: 0.75rem;
      }
      html {
        font-size: 14px;
      }
      .badge {
        padding: 0.35rem 0.75rem;
        font-weight: 400;
        border-radius: var(--border-radius);
      }
      .badge-success {
        background-color: #28a74555;
        color: inherit;
      }
      .navbar {
        background-color: #fff;
        transition: all 400ms ease;
        border-bottom: 1px solid transparent;
      }
      .navbar--scrolled {
        border-bottom: 1px solid var(--border-color);
        box-shadow: 0 1px 5px 1px rgba(0, 0, 0, 0.075);
      }
      .nav-link {
        color: #000;
        padding: 0.4rem 1rem;
      }
      .splash-img {
        height: 0;
        padding-bottom: 65%;
        width: 100%;
        background-position: center;
        background-size: cover;
      }
      .page-title {
        margin: 0 0 0.5rem;
        font-weight: 600;
      }
      .page-kicker {
        font-size: 1rem;
        margin: 0;
        color: #757575;
      }
      .doc-grid {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: var(--gap);
      }
      .doc-cell {
        padding: 0.75rem 1rem;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        color: inherit;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .doc-cell:hover {
        text-decoration: none;
        background-color: #f3f3f3;
      }
      .doc-title {
        margin-bottom: 1rem;
      }
      .doc-cell-suffix {
        color: #777;
      }
      .floorplan-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
      }
      .floorplan-cell {
        color: inherit;
        text-align: center;
      }
      .floorplan-cell img,
      .ls-item {
        border-radius: var(--border-radius);
      }
      .floorplan-cell img {
        border: 1px solid var(--border-color);
      }
      .image-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--gap);
      }
      .ls-item {
        position: relative;
        display: block;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        height: 0;
        padding-bottom: 100%;
      }
      .ls-caption {
        position: absolute;
        padding: 0.5rem 1rem;
        bottom: 0;
        left: 0;
        color: #fff;
        font-size: 1rem;
        text-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
      }
      .map-container {
        max-width: var(--container-width);
        margin: 0 auto;
      }
      .map-container .embed-responsive.empty {
        height: 0 !important;
      }
      .map {
        height: 0;
        padding-bottom: 80%;
      }
      .contact-card {
        display: flex;
        font-size: 0.9rem;
      }
      .contact-photo {
        width: 160px;
      }
      .contact-photo img {
        border-top-left-radius: var(--border-radius);
        border-bottom-left-radius: var(--border-radius);
      }
      .contact-main {
        padding: 1rem;
        border-top-right-radius: var(--border-radius);
        border-bottom-right-radius: var(--border-radius);
        border: 1px solid var(--border-color);
        min-width: 50%;
      }
      .floatingAction,
      .footer {
        border-top: 1px solid var(--border-color);
      }
      .footer {
        background-color: var(--footer-bg);
        padding: 2rem 0;
      }
      .floatingAction ~ .footer {
        padding-bottom: calc(125px + 2rem);
      }
      .floatingAction {
        padding: 1.25rem 0;
        background-color: #fff;
        box-shadow: 0 -1px 5px 1px rgba(0, 0, 0, 0.075);
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        font-size: 0.8rem;
        transform: translateY(100%);
        transition: all 250ms ease;
      }
      .floatingAction--active {
        transform: translateY(0);
      }
      .floatingAction-inner {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
      }
      .policy-form {
        font-size: 0.9rem;
        padding: 1rem 0;
      }
      @media screen and (min-width: 768px) {
        html {
          font-size: 15px;
        }
        .navbar {
          position: sticky;
          top: 0;
          left: 0;
          right: 0;
          z-index: 1000;
        }
        .splash-img {
          height: 80vh;
          padding: 0;
        }
        .image-grid {
          grid-template-columns: repeat(3, 1fr);
        }
        .image-cell:nth-child(4n + 1) {
          grid-column: 1/3;
        }
        .image-cell:nth-child(4n + 1) .ls-item,
        .image-cell:nth-child(4n + 4) .ls-item {
          padding-bottom: calc(var(--image-gallery-height) / 2 - var(--gap) / 2);
        }
        .image-cell:nth-child(4n + 4) {
          grid-column: 2/4;
        }
        .ls-item {
          padding-bottom: var(--image-gallery-height);
        }
        .map {
          padding-bottom: 45%;
        }
      }
      @media screen and (min-width: 920px) {
        html {
          font-size: 16px;
        }
      }
      .footer-button {
        all: unset;
        cursor: pointer;
      }
      .footer-button:hover {
        text-decoration: underline;
      }

      .baufi-tipster-iframe {
        width: 100%;
        height: 415px;
        border: none;
        background: #f0f0f0;
        overflow: auto;
      }

      @media screen and (max-width: 767px) {
        .baufi-tipster-iframe {
          height: 600px;
          min-height: 600px;
        }
      }

      @media screen and (max-width: 480px) {
        .baufi-tipster-iframe {
          height: 650px;
          min-height: 650px;
        }
      }
    </style>
    {% assign color = shop.color | default: '#0f55eb' %}
    <style>
        .disabled{
      	pointer-events: none;
      }

        :root {
          --primary: {{ color }};
          --primary-light: {{ color }}dd;
        }
        {{ shop.lp_css }}
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v2.9.1/dist/cookieconsent.min.css"
    />
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v2.9.1/dist/cookieconsent.min.js"
    ></script>
    {{ shop.lp_js }}
  </head>
  {% assign needsPolicy = policy.needed %} {% assign policyAccepted = policy.accepted %} {% assign reasonSubmitted =
  reason.submitted %} {% assign showCancelButton = reason.show_cancel_button %}

  <body>
    <nav id="main-nav" class="navbar navbar-expand-md">
      <span class="navbar-brand logo-wrap">
        <img src="{{ shop.logoUrl }}" alt="Logo" class="d-inline-block mb-2" height="40" />
      </span>

      <div class="collapse navbar-collapse justify-content-end">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="#property-infos">{{ t.details }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#images">{{ t.images }}</a>
          </li>
          {% if property.documents.size > 0 %}
          <li class="nav-item">
            <a class="nav-link" href="#documents">{{ t.documents }}</a>
          </li>
          {% endif %} {% for embed in property.embed_links %}
          <li class="nav-item">
            <a class="nav-link" href="#embed-{{ embed.id }}">{{ embed.title }}</a>
          </li>
          {% endfor %}
          <li class="nav-item">
            <a class="nav-link" href="#location">{{ t.location }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#contact">{{ t.contact }}</a>
          </li>
        </ul>
      </div>

      {% unless short_exposee %}
      <div>
        <a class="nav-link" target="_blank" href="{{ print_url }}">{{ t.print }}</a>
      </div>
      {% endunless %}
    </nav>

    <header class="py-5">
      <div class="page-container">
        {% if policyAccepted %}
        <span class="badge badge-success mb-1">{{ "lp.general.cancelation_policy_accepted" | t }}</span>
        {% endif %} {% if reasonSubmitted %}
        <span class="badge badge-danger mb-1">{{ "lp.general.cancelation_reason" | t }}: {{ reason.submitted }}</span>
        {% endif %}
        <h1 class="page-title">{{ property.title }}</h1>
        <p class="page-kicker">{{ property.lp_address }}</p>
      </div>
    </header>

    <section class="splash mb-5">
      <div
        class="splash-img"
        title="{{ t.title_image }}"
        style="background-image: url('{{ property.images | map: 'url' | first }}')"
      ></div>
    </section>

    <main id="main">
      <section id="description" class="page-container">
        <article>
          <p>{{ property.description_note }}</p>
        </article>
      </section>

      <section class="page-container py-4">
        <div id="property-infos">
          <h2 class="headline">{{ t.details }}</h2>
          <section>
            {% for group in property.structured_data %}
            <main class="mb-4" id="property-data-{{ group.id }}">
              {% for field in group.fields %}
              <div class="d-flex border-bottom py-2" data-field-name="{{ field.key }}">
                <div class="w-100 mr-2 text-muted">{{ field.label }}</div>
                <div class="w-100">
                  {% if field.value == true %} {{ t.yes }} {% else %} {{ field.value }} {% endif %}
                </div>
              </div>
              {% endfor %}
            </main>
            {% endfor %}
          </section>
        </div>
      </section>

      <section class="container">
        <section id="images" class="py-4">
          <div id="images-gallery" class="image-grid">
            {% for image in property.images %}
            <div class="image-cell" title="{{ image.title }}" data-src="{{ image.url }}">
              <a href="{{ image.url }}" class="ls-item" style="background-image: url('{{ image.url }}')">
                {% if image.title %}
                <span class="ls-caption">{{ image.title }}</span>
                {% endif %}
              </a>
            </div>
            {% endfor %}
          </div>
        </section>
      </section>

      {% if property.documents.size > 0 %}
      <section id="documents" class="py-4">
        <section class="page-container">
          <h2 class="headline">{{ t.documents }}</h2>

          <div class="doc-grid">
            {% for doc in property.documents %}
            <a target="_blank" href="{{ doc.url }}" class="doc-cell">
              <span>{{ doc.title }}</span>
              <small class="doc-cell-suffix">{{ "lp.general.download" | t }}</small>
            </a>
            {% endfor %}
          </div>
        </section>
      </section>
      {% endif %} {% if property.image_floorplans.size > 0 %}
      <section id="floorplans" class="container py-4">
        <section class="page-container">
          <h2 class="headline">{{ t.floorplans }}</h2>
          <div class="floorplan-grid">
            {% for floorplan in property.image_floorplans %}
            <a target="_blank" href="{{ floorplan.url }}" class="floorplan-cell">
              <img src="{{ floorplan.url }}" alt="{{ floorplan.title }}" class="w-100" />
              {% if floorplan.title %}
              <small class="text-muted">{{ floorplan.title }}</small>
              {% endif %}
            </a>
            {% endfor %}
          </div>
        </section>
      </section>
      {% endif %} {% if property.furnishing_note %}
      <section id="furnishing" class="py-4">
        <div class="page-container">
          <h2 class="headline mb-4">{{ t.furnishing }}</h2>
          <article>
            <p>{{ property.furnishing_note }}</p>
          </article>
        </div>
      </section>
      {% endif %} {% if property.links.size > 0 %}
      <section id="links" class="page-container">
        <h2 class="headline">{{ t.links }}</h2>
        <div class="doc-grid">
          {% for link in property.links %}
          <a target="_blank" href="{{ link.url }}" class="doc-cell">
            <span>{{ link.title }}</span>
            <small class="doc-cell-suffix">{{ t.visit_link }}</small>
          </a>
          {% endfor %}
        </div>
      </section>
      {% endif %} {% for embed in property.embed_links %}
      <section id="embed-{{ embed.id }}" class="py-4">
        <div class="page-container">
          <h2 class="headline">{{ embed.title }}</h2>
        </div>

        <div class="container">
          <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" allowfullscreen="true" src="{{ embed.url }}" frameborder="0"></iframe>
          </div>
        </div>
      </section>
      {% endfor %}

      <section id="location" class="py-4">
        <div class="page-container">
          <h2 class="headline mb-4">{{ t.location }}</h2>
          <article>
            <p>{{ property.location_note }}</p>
          </article>
        </div>

        <div class="map-container py-4">
          <div class="embed-responsive embed-responsive-21by9 empty">
            {% if show_complete_address and property.lng and property.lat %}
            <div
              id="map-wrap"
              data-lat="{{ property.lat }}"
              data-lng="{{ property.lng }}"
              class="embed-responsive-item"
            ></div>
            {% elsif property.zip_code or property.city %}
            <div
              id="map-wrap"
              data-zipcode="{{ property.zip_code }}"
              data-city="{{ property.city }}"
              class="embed-responsive-item"
            ></div>
            {% endif %}
          </div>
        </div>
      </section>

      {% if property.other_note %}
      <section id="other" class="py-4">
        <div class="page-container">
          <h2 class="headline mb-4">{{ t.other }}</h2>
          <article>
            <p>{{ property.other_note }}</p>
          </article>
        </div>
      </section>
      {% endif %} {% if property.baufi_tipster.widget and property.zip_code and property.formatted.raw.price and
      property.price_on_inquiry == false and property.for_bidding == false%}
      <section class="container">
        <section id="baufi_tipster" class="py-4">
          <iframe
            class="baufi-tipster-iframe"
            src="https://mortgage-form-application.finanzen.immobilienscout24.de/financing/{{property.baufi_tipster.token}}?company_id={{property.baufi_tipster.company_id}}&postcode={{property.zip_code}}&purchaseprice={{property.formatted.raw.price}}&ps_estate_id={{property.id}}&partner_key={{ property.baufi_tipster.partner_key }}&transaction_id={{property.expose_id}}&ps_contact_id={{ broker.name }}"
            scrolling="yes"
          ></iframe>
        </section>
      </section>
      {% endif %}

      <section id="contact" class="py-4">
        <div class="page-container">
          <h2 class="headline mb-4">{{ t.contact }}</h2>
          <div class="contact-card">
            {% if offmarket_enabled %}
            <button onclick="action()" id="show-contact" class="show-contact-btn">
              {{ "lp.general.show_contact_details" | t }}
            </button>
            <div id="contact-info" class="invisible" style="display: flex; font-size: 0.9rem">
              {% if broker.avatarUrl %}
              <aside class="contact-photo">
                <img src="{{ broker.avatarUrl }}" class="w-100" />
              </aside>
              {% endif %}
              <article class="contact-main">
                <h5 class="mb-0">{{ broker.name }}</h5>
                <p class="text-muted">{{ broker.position }}</p>
                <p>
                  <a href="mailto:{{ broker.contactEmail }}">{{ broker.contactEmail }}</a>
                  {% if broker.contactPhone %}
                  <br />
                  <a href="tel:{{ broker.contactPhone }}">{{ broker.contactPhone }}</a>
                  {% endif %} {% if broker.contactCell %}
                  <br />
                  <a href="tel:{{ broker.contactCell }}">{{ broker.contactCell }}</a>
                  {% endif %}
                </p>
              </article>
            </div>
            {% else %} {% if broker.avatarUrl %}
            <aside class="contact-photo">
              <img src="{{ broker.avatarUrl }}" class="w-100" />
            </aside>
            {% endif %}
            <article class="contact-main">
              <h5 class="mb-0">{{ broker.name }}</h5>
              <p class="text-muted">{{ broker.position }}</p>
              <p>
                <a href="mailto:{{ broker.contactEmail }}">{{ broker.contactEmail }}</a>
                {% if broker.contactPhone %}
                <br />
                <a href="tel:{{ broker.contactPhone }}">{{ broker.contactPhone }}</a>
                {% endif %} {% if broker.contactCell %}
                <br />
                <a href="tel:{{ broker.contactCell }}">{{ broker.contactCell }}</a>
                {% endif %}
              </p>
            </article>
            {% endif %} {% if showCancelButton %}
            <article>
              <div class="col-md-12 text-center my-5">
                <a
                  href="#"
                  role="button"
                  data-toggle="modal"
                  data-target="#not-interested"
                  class="btn btn-light btn-block btn-one"
                >
                  <i class="fal fa-house-circle-xmark fa-fw"></i>
                  {{ "lp.no_interest.button" | t }}
                </a>
                <center>
                  <p><small>{{ "lp.no_interest.text" | t }}</small></p>
                </center>
              </div>
            </article>
            {% endif %}
          </div>
        </div>
      </section>
    </main>

    {% if policy.show_form %} {% unless reasonSubmitted %}
    <div class="modal" id="policy" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <form
          id="policy-form"
          class="modal-content"
          action="{{ policy.submit_url }}"
          method="post"
          data-alert-msg="{{ policy.alert }}"
        >
          <input type="hidden" name="_method" value="put" />
          <div class="modal-header">
            <h5 class="modal-title">{{ t.cta.approve_modal.headline }}</h5>
            <button class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <article class="py-3">
              {% for checkbox in policy.checkboxes %}
              <div class="js-checkable">
                <label for="{{ checkbox.name }}">
                  {% if checkbox.required %}
                  <input
                    type="checkbox"
                    name="{{ checkbox.name }}"
                    id="{{ checkbox.name }}"
                    value="1"
                    class="mr-2"
                    required
                  />
                  {% else %}
                  <input type="checkbox" name="{{ checkbox.name }}" id="{{ checkbox.name }}" value="1" class="mr-2" />
                  {% endif %} {{ checkbox.label }}
                </label>
              </div>
              {% endfor %}
              <p class="text-muted mb-0"><small>{{ t.cta.approve_modal.footnote }}</small></p>
            </article>
          </div>
          <div class="modal-footer">
            <button id="policy-submit-button" class="btn btn-sm btn-primary">{{ t.cta.approve_modal.submit }}</button>
          </div>
        </form>
      </div>
    </div>
    <div class="modal" id="reason" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <form id="reason-form" class="modal-content" action="{{ reason.submit_url }}" method="post">
          <div class="modal-header">
            <h5 class="modal-title">{{ t.cta.cancel_modal.headline }}</h5>
            <button class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <article class="py-3">
              {% for option in reason.options %}
              <div>
                <label for="reason_{{ option.id }}">
                  <input type="radio" name="reason" id="reason_{{ option.id }}" value="{{ option.id }}" class="mr-2" />
                  {{ option.name }}
                </label>
              </div>
              {% endfor %}
              <div>
                <label for="reason_note">{{ t.cta.cancel_modal.reason_note }}</label>
                <textarea name="reason_note" class="form-control"></textarea>
              </div>
            </article>
          </div>
          <div class="modal-footer">
            <button id="reason-submit-button" class="btn btn-sm btn-primary">{{ t.cta.cancel_modal.submit }}</button>
          </div>
        </form>
      </div>
    </div>
    <div class="modal" id="policy-description" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ "lp.general.cancelation_policy" | t }}</h5>
            <button class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <article>{{ policy.description }}</article>
          </div>
        </div>
      </div>
    </div>
    <aside id="floating-action" class="floatingAction">
      <section class="page-container">
        <div class="text-center">
          <p>
            <strong>{{ t.cta.headline }}</strong>
            <br />
            {{ t.cta.desc }}
          </p>
          <div>
            <button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#policy">
              {{ t.cta.approve }}
            </button>
            <button class="btn btn-secondary btn-sm" data-toggle="modal" data-target="#reason">
              {{ t.cta.cancel }}
            </button>
          </div>
        </div>
      </section>
    </aside>
    {% endunless %} {% endif %}

    <footer id="footer" class="footer">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <div class="w-100">
            <img src="{{ shop.logoUrl }}" alt="Logo" width="150" />
          </div>

          <nav class="d-flex mt-1">
            <button class="footer-button mr-3 text-reset" data-toggle="modal" data-target="#terms">
              {{ "lp.general.tc" | t }}
            </button>
            <button class="footer-button mr-3 text-reset" data-toggle="modal" data-target="#privacy">
              {{ "lp.general.privacy" | t }}
            </button>
            {% if cookie_consent.active %}
            <button class="footer-button mr-3 text-reset" data-cc="c-settings">{{ "lp.general.cookie" | t }}</button>
            {% endif %}
            <button class="footer-button mr-3 text-reset" data-toggle="modal" data-target="#imprint">
              {{ "lp.general.imprint" | t }}
            </button>
            <button class="footer-button text-reset" data-toggle="modal" data-target="#accessibility">
              {{ "lp.general.accessibility" | t }}
            </button>
          </nav>
        </div>
      </div>
    </footer>

    <div class="modal" id="imprint" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ "lp.general.imprint" | t }}</h5>
            <button class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <article>{{ shop.imprintNote }}</article>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="privacy" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ "lp.general.privacy" | t }}</h5>
            <button class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <article>{{ shop.privacyNote }}</article>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="terms" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ "lp.general.tc" | t }}</h5>
            <button class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <article>{{ shop.termsNote }}</article>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="accessibility" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ "lp.general.accessibility" | t }}</h5>
            <button class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <article>{{ shop.accessibilityNote }}</article>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="not-interested" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <form id="not-interested-form" class="modal-content" action="{{ reason.submit_url }}" method="post">
          <div class="modal-header">
            <h5 class="modal-title">{{ t.not_interested_modal.headline }}</h5>
            <button class="close" data-dismiss="modal">
              <span aria-hidden="true"><i class="fal fa-times"></i></span>
            </button>
          </div>
          <div class="modal-body">
            <article class="py-3">
              <label>{{ t.not_interested_modal.reservation_reason }}</label>
              {% for option in reason.options %}
              <div>
                <label>
                  <input type="radio" name="reason" value="{{ option.id }}" class="mr-2" />
                  {{ option.name }}
                </label>
              </div>
              {% endfor %}
              <div>
                <label for="reason_note">{{ t.not_interested_modal.reason_note }}</label>
                <textarea name="reason_note" class="form-control"></textarea>
              </div>
            </article>
          </div>
          <div class="modal-footer">
            <button id="not-interested-submit-button" class="btn btn-sm btn-primary">
              {{ t.cta.cancel_modal.submit }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.12/dist/js/lightgallery.min.js"></script>

    <script>
      function action() {
        $("#show-contact").addClass("hidden"), $("#contact-info").removeClass("invisible")
        var url = window.location.href
        var queryStart = url.indexOf("?")
        if (queryStart) {
          url = url.substring(0, queryStart)
        }
        var token = url.split("/").slice(-1)[0]
        $.post(`/public/exposee/create_tracking/${token}`, { event_type: "offmarket_contact_broker_button_clicked" })
      }
      $(document).ready(function () {
        var e = $("#main-nav"),
          t = $("#floating-action"),
          l = 0,
          o = !1
        function r() {
          $('#policy-form input[type="checkbox"]:required:not(:checked)').length > 0
            ? $("#policy-submit-button").addClass("disabled")
            : $("#policy-submit-button").removeClass("disabled")
        }
        function a() {
          $('#reason-form input[type="radio"]:checked').length <= 0 && !$("#reason-form textarea").val()
            ? $("#reason-submit-button").addClass("disabled")
            : $("#reason-submit-button").removeClass("disabled")
        }
        function b() {
          $('#not-interested-form input[type="radio"]:checked').length <= 0
            ? $("#not-interested-submit-button").addClass("disabled")
            : $("#not-interested-submit-button").removeClass("disabled")
        }
        $('#not-interested-form input[type="radio"]').on("change", b),
          b(),
          $("#not-interested-form").on("submit", function (e) {
            $("#not-interested-submit-button").addClass("disabled")
          })
        $(window).on("scroll", function () {
          ;(l = window.scrollY),
            o ||
              setTimeout(function () {
                e.toggleClass("navbar--scrolled", l > 50), t.toggleClass("floatingAction--active", l > 500), (o = !1)
              }, 16),
            (o = !0)
        }),
          $('#policy-form input[type="checkbox"]').on("change", r),
          $("#policy-form").on("submit", function (e) {
            $('input[name="accept_service"]').length > 0 &&
            $('input[name="accept_service"]:checked').length <= 0 &&
            !confirm($("#policy-form").data("alert-msg"))
              ? e.preventDefault()
              : $("#policy-submit-button").addClass("disabled")
          }),
          r(),
          $('#reason-form input[type="radio"]').on("change", a),
          $("#reason-form textarea").on("keyup", a),
          $("#reason-form").on("submit", function (e) {
            $("#reason-submit-button").addClass("disabled")
          }),
          a(),
          $(document).on("click", ".js-scrollTo", function (e) {
            e.preventDefault()
            var t = $(this).attr("href"),
              l = $(t).offset().top - ($(".navbar-brand").height() || 0) - 30
            $("html, body").animate({ scrollTop: l }, 700)
          }),
          $("#images-gallery").lightGallery({ download: !1, thumbnail: !1 })
      })
    </script>
    <script
      type="{% if cookie_consent.active %}text/plain{% else %}application/javascript{% endif %}"
      data-cookiecategory="thirdparty"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCrUF4g1DQ78Rs_wurS4WvQXuZigEOPEhs&callback=Function.prototype"
    ></script>
    <script
      type="{% if cookie_consent.active %}text/plain{% else %}application/javascript{% endif %}"
      data-cookiecategory="thirdparty"
    >
      window.mapStyle = [
        { featureType: "landscape.man_made", elementType: "geometry", stylers: [{ color: "#f7f1df" }] },
        { featureType: "landscape.natural", elementType: "geometry", stylers: [{ color: "#d0e3b4" }] },
        { featureType: "poi.medical", elementType: "geometry", stylers: [{ color: "#fbd3da" }] },
        { featureType: "poi.park", elementType: "geometry", stylers: [{ color: "#bde6ab" }] },
        { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ffe15f" }] },
        { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ color: "#efd151" }] },
        { featureType: "road.arterial", elementType: "geometry.fill", stylers: [{ color: "#ffffff" }] },
        { featureType: "road.local", elementType: "geometry.fill", stylers: [{ color: "black" }] },
        { featureType: "transit.station.airport", elementType: "geometry.fill", stylers: [{ color: "#cfb2db" }] },
        { featureType: "water", elementType: "geometry", stylers: [{ color: "#a2daf2" }] },
      ]
      $(document).ready(function () {
        var s = $("#map-wrap"),
          n = { lat: s.data("lat"), lng: s.data("lng") }
        if (s.length > 0) {
          s.get(0).parentNode.classList.remove("empty")
          if (n.lat && n.lng) {
            var map = L.map('map-wrap', { scrollWheelZoom: false }).setView([n.lat, n.lng], 15);

            // Load and display the OSM tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 19
            }).addTo(map);
            // Define a location using latitude and longitude
            var markerLocation = L.latLng(n.lat, n.lng);  // You can replace these values with your desired coordinates.

            // Create a marker and add it to the map
            var marker = L.marker(markerLocation).addTo(map);
          } else {
            s.get(0).innerHTML =
              '<iframe src="https://maps.google.de/maps?hl=de&q={{ property.zip_code }} {{ property.city }}&ie=UTF8&output=embed" frameborder="0"></iframe>'
          }
        }
      })
    </script>
    {% if cookie_consent.active %}
    <script>
      window.addEventListener("load", function () {
        const mapSelector = document.getElementById("map-wrap")

        const cookieConsentUrl = "{{ cookie_consent.consent_url }}"
        const cookieTitle = "{{ 'lp.cookies.title' | t }}"
        const cookieText =
          "{{ 'lp.cookies.text' | t }}" +
          ' <a href="#" data-toggle="modal" data-target="#privacy" class="cc-link">' +
          "{{ 'lp.cookies.privacy_policy' | t }}" +
          "</a>"
        const cookieconsent = initCookieConsent()
        cookieconsent.run({
          current_lang: "{{ locale }}",
          autoclear_cookies: true,
          cookie_name: "accept-cookie-disclaimer",
          cookie_expiration: 365,
          page_scripts: true,
          force_consent: true,
          mode: "opt-in",
          revision: 0,
          gui_options: {
            consent_modal: {
              layout: "cloud",
              position: "bottom center",
              transition: "slide",
            },
            settings_modal: {
              layout: "bar",
              position: "left",
              transition: "slide",
            },
          },
          onFirstAction: function (cookie) {
            if (!cookieConsentUrl) return
            $.post(cookieConsentUrl, {
              preferences: cookie.accepted_categories.join(","),
              source: "exposee",
              created_at: Date.now(),
            })
          },
          onChange: function (cookie, changed_preferences) {
            if (!cookieConsentUrl) return
            $.post(cookieConsentUrl, {
              preferences: cookie.categories.join(","),
              source: "exposee",
              created_at: Date.now(),
            })
          },
          languages: {
            en: {
              consent_modal: {
                title: cookieTitle,
                description: cookieText,
                primary_btn: {
                  text: "{{ 'lp.cookies.accept_all' | t }}",
                  role: "accept_all",
                },
                secondary_btn: {
                  text: "{{ 'lp.cookies.settings' | t }}",
                  role: "settings",
                },
                revision_message: "<br><br> Revision changed",
              },
              settings_modal: {
                title: cookieTitle,
                save_settings_btn: "{{ 'lp.cookies.save' | t }}",
                close_btn_label: "{{ 'lp.cookies.close' | t }}",
                accept_all_btn: "{{ 'lp.cookies.accept_all' | t }}",
                reject_all_btn: "{{ 'lp.cookies.reject_all' | t }}",
                cookie_table_headers: [{ col1: "Name" }, { col2: "Domain" }],
                blocks: [
                  {
                    title: "{{ 'lp.cookies.subtitle' | t }}",
                    description: cookieText,
                  },
                  {
                    title: "{{ 'lp.cookies.strictly_neccessary' | t }}",
                    toggle: {
                      value: "necessary",
                      enabled: true,
                      readonly: true,
                    },
                  },
                  {
                    title: "{{ 'lp.cookies.third_party' | t }}",
                    toggle: {
                      value: "thirdparty",
                      enabled: false,
                      readonly: false,
                    },
                    cookie_table: [
                      mapSelector && mapSelector.dataset.lat && mapSelector.dataset.lng
                        ? {
                            col1: "OpenStreetMap",
                            col2: "openstreetmap.org",
                          }
                        : {
                            col1: "Google Maps",
                            col2: "maps.google.com",
                          },
                    ],
                  },
                ],
              },
            },
          },
        })
      })
    </script>
    {% endif %}
  <!-- Footer with Legal Links -->
  <footer style="background-color: #f8f9fa; padding: 30px 20px; margin-top: 60px; border-top: 1px solid #dee2e6; text-align: center;">
    <div style="max-width: 800px; margin: 0 auto;">
      <div style="margin-bottom: 20px;">
        <button onclick="showLegalModal('impressum')" style="background: none; border: none; color: #0066A1; text-decoration: underline; cursor: pointer; margin: 0 15px; font-size: 14px;">Impressum</button>
        <button onclick="showLegalModal('agb')" style="background: none; border: none; color: #0066A1; text-decoration: underline; cursor: pointer; margin: 0 15px; font-size: 14px;">AGB</button>
        <button onclick="showLegalModal('datenschutz')" style="background: none; border: none; color: #0066A1; text-decoration: underline; cursor: pointer; margin: 0 15px; font-size: 14px;">Datenschutz</button>
      </div>
      <p style="color: #6c757d; font-size: 12px; margin: 0;">&copy; 2025 {{ shop.name }}. Alle Rechte vorbehalten.</p>
    </div>
  </footer>

  <!-- Legal Modal -->
  <div id="legalModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 10000; overflow-y: auto;">
    <div style="background: white; max-width: 800px; margin: 50px auto; padding: 30px; border-radius: 8px; position: relative;">
      <button onclick="closeLegalModal()" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
      <h2 id="modalTitle" style="margin-top: 0; color: #0066A1;"></h2>
      <div id="modalContent" style="line-height: 1.6; color: #333; white-space: pre-wrap;"></div>
    </div>
  </div>

  <script>
    function showLegalModal(type) {
      const modal = document.getElementById('legalModal');
      const title = document.getElementById('modalTitle');
      const content = document.getElementById('modalContent');
      
      const legalTexts = {
        impressum: {
          title: 'Impressum',
          content: `{{ shop.impressum | safe }}`
        },
        agb: {
          title: 'Allgemeine Geschäftsbedingungen',
          content: `{{ shop.agb | safe }}`
        },
        datenschutz: {
          title: 'Datenschutzerklärung',
          content: `{{ shop.datenschutz | safe }}`
        }
      };
      
      if (legalTexts[type]) {
        title.textContent = legalTexts[type].title;
        content.textContent = legalTexts[type].content || 'Keine Informationen verfügbar.';
        modal.style.display = 'block';
      }
    }
    
    function closeLegalModal() {
      document.getElementById('legalModal').style.display = 'none';
    }
    
    // Close modal when clicking outside
    document.getElementById('legalModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeLegalModal();
      }
    });
  </script>
    <!-- Superchat Widget -->
  <script src="https://widget.superchat.de/snippet.js?applicationKey=WCyQKxJ081w98a8oE25VqAzXpn" referrerpolicy="no-referrer-when-downgrade" async></script>
</body>
</html>
